"use strict";(self.webpackChunkbricks_llm_docs=self.webpackChunkbricks_llm_docs||[]).push([[951],{2824:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>a});var n=s(5893),i=s(1151);const r={sidebar_position:2},d="API Endpoints",o={id:"developer-access/api-endpoints",title:"API Endpoints",description:"Providers",source:"@site/docs/developer-access/api-endpoints.mdx",sourceDirName:"developer-access",slug:"/developer-access/api-endpoints",permalink:"/docs/developer-access/api-endpoints",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/developer-access/api-endpoints.mdx",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Getting started",permalink:"/docs/developer-access/getting-started"},next:{title:"Integrations",permalink:"/docs/category/integrations"}},c={},a=[{value:"Providers",id:"providers",level:2},{value:"List Providers",id:"list-providers",level:3},{value:"Response",id:"response",level:4},{value:"Proxy Secret Keys",id:"proxy-secret-keys",level:2},{value:"Fetch all Proxy Secret Keys",id:"fetch-all-proxy-secret-keys",level:3},{value:"Search parameters",id:"search-parameters",level:4},{value:"Response",id:"response-1",level:4},{value:"Fetch one Proxy Secret Key",id:"fetch-one-proxy-secret-key",level:3},{value:"Search parameters",id:"search-parameters-1",level:4},{value:"Response",id:"response-2",level:4},{value:"Create a Proxy Secret Key",id:"create-a-proxy-secret-key",level:3},{value:"Request body",id:"request-body",level:4},{value:"Response",id:"response-3",level:4},{value:"Update a Proxy Secret Key",id:"update-a-proxy-secret-key",level:3},{value:"Request body",id:"request-body-1",level:4},{value:"Response",id:"response-4",level:4},{value:"Proxy Secret Keys Usage",id:"proxy-secret-keys-usage",level:2},{value:"Fetch Proxy Secret Keys Usage",id:"fetch-proxy-secret-keys-usage",level:3},{value:"Request body",id:"request-body-2",level:4},{value:"Response",id:"response-5",level:4},{value:"Fetch Proxy Secret Keys Usage by Day",id:"fetch-proxy-secret-keys-usage-by-day",level:3},{value:"Request body",id:"request-body-3",level:4},{value:"Response",id:"response-6",level:4},{value:"Custom IDs",id:"custom-ids",level:2},{value:"List Custom IDs by Proxy Secret Key",id:"list-custom-ids-by-proxy-secret-key",level:3},{value:"Query parameters",id:"query-parameters",level:4},{value:"Response",id:"response-7",level:4}];function l(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{id:"api-endpoints",children:"API Endpoints"}),"\n",(0,n.jsx)(t.h2,{id:"providers",children:"Providers"}),"\n",(0,n.jsx)(t.h3,{id:"list-providers",children:"List Providers"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-http",children:"GET https://trybricks.ai/api/v1/providers\n"})}),"\n",(0,n.jsx)(t.h4,{id:"response",children:"Response"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-json",children:'[\n  {\n    "name": "Some descriptive name for the provider",\n    "id": "some-provider-id",\n    "createdAt": 1707864319,\n    "updatedAt": 1707864319,\n    "provider": "openai",\n    "allowedModels": [] // Not used yet, can be ignored\n  }\n]\n'})}),"\n",(0,n.jsx)(t.h2,{id:"proxy-secret-keys",children:"Proxy Secret Keys"}),"\n",(0,n.jsx)(t.h3,{id:"fetch-all-proxy-secret-keys",children:"Fetch all Proxy Secret Keys"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-http",children:"GET https://trybricks.ai/api/v1/secret-keys?includeMetrics=true&start=<start>&end=<end>\n"})}),"\n",(0,n.jsx)(t.h4,{id:"search-parameters",children:"Search parameters"}),"\n",(0,n.jsx)(t.admonition,{type:"warning",children:(0,n.jsxs)(t.p,{children:["Setting ",(0,n.jsx)(t.code,{children:"includeMetrics"})," to ",(0,n.jsx)(t.code,{children:"true"})," will significantly slow down the request. If you don't need real-time usage, consider using the ",(0,n.jsx)(t.a,{href:"#fetch-proxy-secret-keys-usage-by-day",children:(0,n.jsx)(t.code,{children:"/v1/reporting/events-by-day"})})," endpoint."]})}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Parameter"}),(0,n.jsx)(t.th,{children:"Required"}),(0,n.jsx)(t.th,{children:"Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"includeMetrics"}),(0,n.jsx)(t.td,{children:"optional"}),(0,n.jsx)(t.td,{children:"boolean, if set to true, response will include real-time usage metrics"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"start"}),(0,n.jsx)(t.td,{children:"required if includeMetrics is true"}),(0,n.jsx)(t.td,{children:"number, start time in seconds since epoch"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"end"}),(0,n.jsx)(t.td,{children:"required if includeMetrics is true"}),(0,n.jsx)(t.td,{children:"number, end time in seconds since epoch"})]})]})]}),"\n",(0,n.jsx)(t.h4,{id:"response-1",children:"Response"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-json",children:'[\n  {\n    "name": "Some descriptive name for the key",\n    "keyId": "some-key-id", // Unique identifier of the key\n    "tags": ["clskya3uu0005ye8ggt5bp775"], // Organization ID\n    "createdAt": 1708065781,\n    "updatedAt": 1708065781,\n    "revoked": false,\n    "revokedReason": "",\n    "costLimitInUsd": 100, // Cost limit over lifetime\n    "costLimitInUsdOverTime": 100, // Cost limit per time unit\n    "costLimitInUsdUnit": "mo", // Cost limit time unit\n    "rateLimitOverTime": 10, // Rate limit per time unit\n    "rateLimitUnit": "h", // Rate limit time unit\n    "ttl": "1h", // Time to live\n    "settingIds": ["some-provider-id"],\n    "shouldLogRequest": false, // Whether to request body is logged by BricksAI\n    "shouldLogResponse": false, // weather response body is logged by BricksAI\n    "metrics": {\n      // metrics of the secret key between `start` and `end`\n      "numberOfRequests": 0,\n      "successCount": 0,\n      "costInUsd": 0,\n      "latencyInMs": 0,\n      "promptTokenCount": 0,\n      "completionTokenCount": 0\n    }\n  }\n]\n'})}),"\n",(0,n.jsx)(t.h3,{id:"fetch-one-proxy-secret-key",children:"Fetch one Proxy Secret Key"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-http",children:"GET https://trybricks.ai/api/v1/secret-keys/:keyId?includeMetrics=true&start=<start>&end=<end>&increment=<increment>\n"})}),"\n",(0,n.jsx)(t.h4,{id:"search-parameters-1",children:"Search parameters"}),"\n",(0,n.jsx)(t.admonition,{type:"warning",children:(0,n.jsxs)(t.p,{children:["Setting ",(0,n.jsx)(t.code,{children:"includeMetrics"})," to ",(0,n.jsx)(t.code,{children:"true"})," will significantly slow down the request. If you don't need real-time usage, consider using the ",(0,n.jsx)(t.a,{href:"#fetch-proxy-secret-keys-usage-by-day",children:(0,n.jsx)(t.code,{children:"/v1/reporting/events-by-day"})})," endpoint."]})}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Parameter"}),(0,n.jsx)(t.th,{children:"Required"}),(0,n.jsx)(t.th,{children:"Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"includeMetrics"}),(0,n.jsx)(t.td,{children:"optional"}),(0,n.jsx)(t.td,{children:"boolean, if set to true, response will include real-time usage metrics as a time series"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"start"}),(0,n.jsx)(t.td,{children:"required if includeMetrics is true"}),(0,n.jsx)(t.td,{children:"number, start time in seconds since epoch"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"end"}),(0,n.jsx)(t.td,{children:"required if includeMetrics is true"}),(0,n.jsx)(t.td,{children:"number, end time in seconds since epoch"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"increment"}),(0,n.jsx)(t.td,{children:"required if includeMetrics is true"}),(0,n.jsx)(t.td,{children:"number, increment between each data point in the time series in seconds"})]})]})]}),"\n",(0,n.jsx)(t.h4,{id:"response-2",children:"Response"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-json",children:'[\n  {\n    "name": "Some descriptive name for the key",\n    "keyId": "some-key-id", // Unique identifier of the key\n    "tags": ["clskya3uu0005ye8ggt5bp775"], // Organization ID\n    "key": "hashed-version-of-the-key", // Hashed value of the proxy secret key, can be ignored\n    "createdAt": 1708065781,\n    "updatedAt": 1708065781,\n    "revoked": false,\n    "revokedReason": "",\n    "costLimitInUsd": 100, // Cost limit over lifetime\n    "costLimitInUsdOverTime": 100, // Cost limit per time unit\n    "costLimitInUsdUnit": "mo", // Cost limit time unit\n    "rateLimitOverTime": 10, // Rate limit per time unit\n    "rateLimitUnit": "h", // Rate limit time unit\n    "ttl": "1h", // Time to live\n    "settingIds": ["some-provider-id"],\n    "shouldLogRequest": false, // Whether to request body is logged by BricksAI\n    "shouldLogResponse": false, // weather response body is logged by BricksAI\n    "dataPoints": [\n      // A time series of metrics\n      {\n        "timeStamp": 1706774400, // Time in seconds since epoch\n        "numberOfRequests": 1, // Number of requests during this increment\n        "successCount": 1, // Number of successful requests during this increment\n        "costInUsd": 100, // Cost of requests during this increment\n        "latencyInMs": 722, // Median latency during this increment\n        "promptTokenCount": 18, // Number of prompt tokens during this increment\n        "completionTokenCount": 9 // Number of completion tokens during this increment\n      }\n    ],\n    "latencyInMsMedian": 722, // Median latency over the entire time period\n    "latencyInMs99th": 722 // 99th percentile latency over the entire time period\n  }\n]\n'})}),"\n",(0,n.jsx)(t.h3,{id:"create-a-proxy-secret-key",children:"Create a Proxy Secret Key"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-http",children:"POST https://trybricks.ai/api/v1/secret-keys\n"})}),"\n",(0,n.jsx)(t.h4,{id:"request-body",children:"Request body"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-json",children:'{\n  "name": "Some name", // Required, some descriptive name for the key\n  "providerSettingIds": ["some-provider-id"], // Required, specify which provider settings this key has access to\n  "ttl": "1h", // Optional, time to live, must be a positive integer followed by s, m, or h\n  "rateLimitOverTime": 10, // Optional, rate limit per time unit, as specified in "rateLimitUnit"\n  "rateLimitUnit": "h", // Optional, rate limit time unit, must be s, m, or h\n  "costLimitInUsdPerMonth": 100, // Optional, cost limit per month\n  "costLimitInUsdLifetime": 100 // Optional, cost limit over lifetime\n  "keyRetrievalMethod": "ONCE" // Optional, value can be "ONCE" (default), "ONCE_PER_VIEWER", or "ANYTIME_BY_VIEWER". See more details below.\n}\n'})}),"\n",(0,n.jsx)(t.admonition,{type:"info",children:(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"keyRetrievalMethod"})," controls how the key can be retrieved from the UI after its creation. This setting cannot be edited later. See more details ",(0,n.jsx)("u",{children:(0,n.jsx)(t.a,{href:"/docs/basic-features/create-proxy-secret-keys#key-retrieval-method",children:"here"})})]})}),"\n",(0,n.jsx)(t.h4,{id:"response-3",children:"Response"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-json",children:'{\n  "id": "some-key-id", // Unique identifier of the key\n  "name": "Some name",\n  "organizationId": "some-organization-id",\n  "key": "some-proxy-secret-key" // Proxy secret key, make sure to store it securely as you won\'t see it again\n}\n'})}),"\n",(0,n.jsx)(t.h3,{id:"update-a-proxy-secret-key",children:"Update a Proxy Secret Key"}),"\n",(0,n.jsx)(t.admonition,{type:"info",children:(0,n.jsx)(t.p,{children:"Updates are not immedately effective. It may take a few seconds for the changes to take effect."})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-http",children:"PATCH https://trybricks.ai/api/v1/secret-keys/[keyId]\n"})}),"\n",(0,n.jsx)(t.h4,{id:"request-body-1",children:"Request body"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-json",children:'{\n  "name": "Some name", // Optional, some descriptive name for the key\n  "providerSettingIds": ["some-provider-id"], // Optional, specify which provider settings this key has access to\n  "revoked": true // Optional, whether the key is revoked\n  "rateLimitOverTime": 10, // Optional, rate limit per time unit, as specified in "rateLimitUnit"\n  "rateLimitUnit": "h", // Optional, rate limit time unit, must be s, m, or h\n  "costLimitInUsdPerMonth": 100, // Optional, cost limit per month\n  "costLimitInUsdLifetime": 100 // Optional, cost limit over lifetime\n}\n'})}),"\n",(0,n.jsx)(t.h4,{id:"response-4",children:"Response"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-txt",children:"success\n"})}),"\n",(0,n.jsx)(t.h2,{id:"proxy-secret-keys-usage",children:"Proxy Secret Keys Usage"}),"\n",(0,n.jsx)(t.h3,{id:"fetch-proxy-secret-keys-usage",children:"Fetch Proxy Secret Keys Usage"}),"\n",(0,n.jsx)(t.admonition,{type:"warning",children:(0,n.jsxs)(t.p,{children:["This endpoint returns real-time usage, but is computationally expensive. If you don't need real-time usage and need a faster response, consider using the ",(0,n.jsx)(t.a,{href:"#fetch-proxy-secret-keys-usage-by-day",children:(0,n.jsx)(t.code,{children:"/v1/reporting/events-by-day"})})," endpoint."]})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-http",children:"POST https://trybricks.ai/api/v1/reporting/events\n"})}),"\n",(0,n.jsx)(t.h4,{id:"request-body-2",children:"Request body"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-json",children:'{\n  "start": 1710460800, // Required, start time in seconds since epoch\n  "end": 1711492257, // Required, end time in seconds since epoch\n  "increment": 300, // Required, increment between each data point in the time series in seconds\n  "keyIds": ["some-key-id"] // Required, list of key IDs\n  "customIds": ["some-custom-id"] // Optional, list of custom IDs\n  "groupBy": ["keyId", "customId", "model"] // Optional, a list of fields to group by. Must be one of "keyId", "customId", or "model". If not specified, the usage will be aggregated across all keys, custom IDs, and models.\n}\n'})}),"\n",(0,n.jsx)(t.h4,{id:"response-5",children:"Response"}),"\n",(0,n.jsxs)(t.p,{children:["Each object in ",(0,n.jsx)(t.code,{children:"dataPoints"})," represents usage for an increment."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-json",children:'{\n\t"dataPoints": [\n\t\t{\n\t\t\t"timeStamp": 1710460800,\n\t\t\t"numberOfRequests": 123,\n\t\t\t"successCount": 123,\n\t\t\t"costInUsd": 123,\n\t\t\t"latencyInMs": 123,\n\t\t\t"promptTokenCount": 123,\n\t\t\t"completionTokenCount": 123,\n\t\t\t"model": "",\n\t\t\t"keyId": "some-key-id"\n      "customId": "some-custom-id"\n\t\t},\n\t\t...\n\t],\n\t"latencyInMsMedian": 0,\n\t"latencyInMs99th": 0\n}\n'})}),"\n",(0,n.jsx)(t.h3,{id:"fetch-proxy-secret-keys-usage-by-day",children:"Fetch Proxy Secret Keys Usage by Day"}),"\n",(0,n.jsx)(t.admonition,{type:"info",children:(0,n.jsxs)(t.p,{children:["This is the fastest endpoint for fetching usage metrics. However, metrics from this endpoint are only updated every 24 hours. If you need real-time data, use the slower ",(0,n.jsx)(t.a,{href:"#fetch-one-proxy-secret-key",children:(0,n.jsx)(t.code,{children:"/v1/secret-keys/:keyId"})}),", ",(0,n.jsx)(t.a,{href:"#fetch-all-proxy-secret-keys",children:(0,n.jsx)(t.code,{children:"/v1/secret-keys"})}),", or ",(0,n.jsx)(t.a,{href:"#fetch-proxy-secret-keys-usage",children:(0,n.jsx)(t.code,{children:"/v1/reporting/events"})})," endpoints instead."]})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-http",children:"POST https://trybricks.ai/api/v1/reporting/events-by-day\n"})}),"\n",(0,n.jsx)(t.h4,{id:"request-body-3",children:"Request body"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-json",children:'{\n  "start": 1710460800, // Start time in seconds since epoch\n  "end": 1711492257, // End time in seconds since epoch\n  "keyIds": ["some-key-id"] // List of key IDs\n}\n'})}),"\n",(0,n.jsx)(t.h4,{id:"response-6",children:"Response"}),"\n",(0,n.jsxs)(t.p,{children:["Each object in ",(0,n.jsx)(t.code,{children:"dataPoints"})," represents a key's usage for a day. If a key does not have any usage for the day, it will not be included in the response."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-json",children:'{\n\t"dataPoints": [\n\t\t{\n\t\t\t"timeStamp": 1710460800,\n\t\t\t"numberOfRequests": 123,\n\t\t\t"successCount": 123,\n\t\t\t"costInUsd": 123,\n\t\t\t"latencyInMs": 123,\n\t\t\t"promptTokenCount": 123,\n\t\t\t"completionTokenCount": 123,\n\t\t\t"model": "",\n\t\t\t"keyId": "some-key-id"\n\t\t},\n\t\t...\n\t],\n\t"latencyInMsMedian": 0, // ignore\n\t"latencyInMs99th": 0 // ignore\n}\n'})}),"\n",(0,n.jsx)(t.h2,{id:"custom-ids",children:"Custom IDs"}),"\n",(0,n.jsx)(t.h3,{id:"list-custom-ids-by-proxy-secret-key",children:"List Custom IDs by Proxy Secret Key"}),"\n",(0,n.jsxs)(t.p,{children:["This endpoint returns a list of ",(0,n.jsx)("u",{children:(0,n.jsx)(t.a,{href:"/docs/basic-features/custom-id",children:"Custom IDs"})})," that were used with a proxy secret key."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-http",children:"GET https://trybricks.ai/api/v1/custom-ids?keyId=<some-key-id>\n"})}),"\n",(0,n.jsx)(t.h4,{id:"query-parameters",children:"Query parameters"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Parameter"}),(0,n.jsx)(t.th,{children:"Required"}),(0,n.jsx)(t.th,{children:"Description"})]})}),(0,n.jsx)(t.tbody,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"keyId"}),(0,n.jsx)(t.td,{children:"required"}),(0,n.jsx)(t.td,{children:"ID of proxy secret key that you want to query"})]})})]}),"\n",(0,n.jsx)(t.h4,{id:"response-7",children:"Response"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-json",children:'{\n  "customIds": ["id-1", "id-2", "id-3"]\n}\n'})})]})}function h(e={}){const{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},1151:(e,t,s)=>{s.d(t,{Z:()=>o,a:()=>d});var n=s(7294);const i={},r=n.createContext(i);function d(e){const t=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);